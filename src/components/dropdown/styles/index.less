@import '../../style/index.less';
@dropDown: ~'@{uni-prefix}-drop-down';
@dropMenu: ~'@{uni-prefix}-menu';

.btn(@padding, @border-radius) {
  padding: @padding;
  text-align: center;
  background: @white;
  border: 1px solid transparent;
  border-radius: @border-radius;
  display: inline-block;
  white-space: nowrap;
  background-image: none;
  cursor: pointer;
  outline: none;
  touch-action: manipulation;
  height: 32px;
  line-height: 1.499;
}

// 所有的下拉style
.@{dropDown} {
  position: absolute;
  visibility: hidden;
  box-sizing: content-box;
  z-index: 1050;
  margin: 0;
  padding: 0;
  opacity: 0;
  transition: opacity 0.3s linear;
  &-show {
    opacity: 1;
    visibility: visible;
    transition: opacity 0.3s linear;
  }
  &-containter {
    padding: 3px 0px;
    background-color: @dropdown-containter-bg;
    box-shadow: 0 1px 4px 1px @dropdown-boxshadow;
    border-radius: 3px;
    min-width: 60px;
    transition: all 0.3s ease;
  }
  &-arrow {
    position: absolute;
    width: 5px;
    height: 5px;
    background: @dropdown-containter-bg;
    box-shadow: 0 1px 4px -1px @dropdown-boxshadow;
    &-bottomCenter {
      left: 50%;
      top: 0;
      transform: translate(-50%, -2.5px) rotate(45deg);
    }
    &-topCenter {
      left: 50%;
      bottom: -5px;
      transform: translate(-50%, -2.5px) rotate(45deg);
    }
    &-bottomLeft {
      left: 10%;
      top: 0;
      transform: translate(-10%, -2.5px) rotate(45deg);
    }
    &-topLeft {
      left: 10%;
      bottom: -5px;
      transform: translate(-10%, -2.5px) rotate(45deg);
    }
    &-bottomRight {
      right: 10%;
      top: 0;
      transform: translate(-10%, -2.5px) rotate(45deg);
    }
    &-topRight {
      right: 10%;
      bottom: -5px;
      transform: translate(-10%, -2.5px) rotate(45deg);
    }
  }



// button
  &-btngroup {
    display: inline-block;
    margin: 6px;
  }
  &-btn {
    color: @dropdown-btn-text-color;
    .btn(0px 12px, @border-radius-base 0 0 @border-radius-base,);
    border-right: none;
    font-weight: @btn-font-weight;
    border-color: @dropdown-btn-default-border-color;
    &:hover {
      color: @dropdown-btn-default-hover-color;
      border-color: @dropdown-btn-default-hover-border-color;
      border-right: 1px solid @dropdown-btn-default-hover-border-color;
      & + button {
        border-left: none;
      }
    }
    &-size-large {
      height: @btn-height-lg;
      padding: @btn-padding-lg;
      font-size: @btn-font-size-lg;
    }
    &-size-small {
      height: @btn-height-sm;
      padding: @btn-padding-sm;
      font-size: @btn-font-size-sm;
    }
    &-type-dashed {
      border: 1px dashed @dropdown-btn-dashed-border-color;
      border-right: none;
      &:hover {
        border-right: 1px dashed @dropdown-btn-dashed-hover-border-color;
      }
    }
    &-type-primary {
      color: @dropdown-btn-primary-color;
      background-color: @dropdown-btn-primary-bg;
      border-color: @dropdown-btn-primary-border-color;
      &:hover {
        color: @dropdown-btn-primary-hover-color;
        border-color: @dropdown-btn-primary-hover-bg;
        border-right-color: @dropdown-btn-primary-hover-border-right-color;
      }
    }
    &-type-danger {
      color: @dropdown-btn-danger-color;
      background-color: @dropdown-btn-danger-bg;
      border-color: @dropdown-btn-danger-border-color;
      &:hover, &:active {
        color: @dropdown-btn-danger-hover-color;
        background-color: @dropdown-btn-danger-hover-bg;
        border-color: @dropdown-btn-danger-hover-border-color;
        border-right-color: @dropdown-btn-danger-hover-border-right-color;
      }
    }
    &-type-link {
      color: @dropdown-btn-link-color;
      background: transparent;
      border-color: transparent;
      box-shadow: none;
      &:hover {
        color: @dropdown-btn-link-hover-color;
        background: transparent;
        border-color: transparent;
        box-shadow: none;
      }
    }
    &-disabled {
      color: @dropdown-btn-disabled-color;
      background-color: @dropdown-btn-disabled-bg;
      border-color: @dropdown-btn-disabled-border-color;
      cursor: not-allowed;
      &:hover, &:active {
        color: @dropdown-btn-disabled-color;
        background-color: @dropdown-btn-disabled-bg;
        border-color: @dropdown-btn-disabled-border-color;
      }
    }
  }
  &-btnIcon {
    color: @dropdown-btn-text-color;
    .btn(0px 8px, 0 @border-radius-base @border-radius-base 0);
    font-weight: @btn-font-weight;
    border-color: @dropdown-btn-default-border-color;
    &:hover {
      color: @dropdown-btn-default-hover-color;
      border-color:@dropdown-btn-default-hover-border-color;
    }
    &-size-large {
      height: @btn-height-lg;
      padding: @btn-padding-lg;
      font-size: @btn-font-size-lg;
    }
    &-size-small {
      height: @btn-height-sm;
      padding: @btn-padding-sm;
      font-size: @btn-font-size-sm;
    }
    &-type-dashed {
      border: 1px dashed @dropdown-btn-dashed-border-color;
    }
    &-type-primary {
      color: @dropdown-btn-primary-color;
      background-color: @dropdown-btn-primary-bg;
      border-color: @dropdown-btn-primary-border-color;
      border-left-color: @dropdown-btn-primary-hover-border-right-color;
      &:hover {
        color: @dropdown-btn-primary-hover-color;
        border-left-color: @dropdown-btn-primary-hover-border-right-color;
      }
    }
    &-type-danger {
      color: @dropdown-btn-danger-color;
      background-color: @dropdown-btn-danger-bg;
      border-color: @dropdown-btn-danger-border-color;
      border-left-color:  @white;
      &:hover, &:active {
        color: @dropdown-btn-danger-hover-color;
        background-color: @dropdown-btn-danger-hover-bg;
        border-color: @dropdown-btn-danger-hover-border-color;
        border-left-color:  @white;
      }
    }
    &-type-link {
      color: @dropdown-btn-link-color;
      background: transparent;
      border-color: transparent;
      box-shadow: none;
      &:hover {
        color: @dropdown-btn-link-hover-color;
        background: transparent;
        border-color: transparent;
        box-shadow: none;
      }
    }
    &-disabled {
      color: @dropdown-btn-disabled-color;
      background-color: @dropdown-btn-disabled-bg;
      border-color: @dropdown-btn-disabled-border-color;
      cursor: not-allowed;
      &:hover, &:active {
        color: @dropdown-btn-disabled-color;
        background-color: @dropdown-btn-disabled-bg;
        border-color: @dropdown-btn-disabled-border-color;
      }
    }
  }
}

@menu: ~"@{uni-prefix}-menu";
@menu-dark: ~"@{menu}-dark";
@menu-light: ~"@{menu}-light";
@menu-vertical: ~"@{menu}-vertical";
@menu-sub-menu: ~"@{menu}-sub-menu";
@menu-item: ~"@{menu}-item";
@menu-item-group: ~"@{menu}-item-group";
@menu-item-selected: ~"@{menu}-item-selected";
@menu-sub-menu-selected: ~"@{menu}-sub-menu-selected";
@menu-title: ~"@{menu}-title";
@menu-left-icon: ~"@{menu}-left-icon";

.abcdefg() {
  .@{menu-light},
  .@{menu-dark} {
      color: @menu-light-color;
      background-color: @menu-bg;
  }

  .@{menu-vertical} {
    box-shadow: none;
    padding: 3px 0 3px 0;
    overflow: auto;
    background-color: @white;

    div.@{menu-sub-menu},
    div.@{menu-item},
    div.@{menu-item-group} {
      height: 28px;
      padding-right: 8px;
      font-size: 14px;
      line-height: 28px;

      .@{menu-left-icon} {
        float: left;
        margin-right: -6px;
      }

      .@{menu-title} {
        line-height: 28px;
        color: @menu-light-color;
        letter-spacing: 0.46px;
        overflow: hidden;
        white-space: nowrap;
        text-overflow:ellipsis;
      }

      &:hover{
        background-color: @item-hover-bg;
      }
    }

    div.@{menu-item-selected},
    div.@{menu-item-selected}.@{menu-dark},
    div.@{menu-item-selected}.@{menu-light},
    div.@{menu-sub-menu-selected}.@{menu-dark},
    div.@{menu-sub-menu-selected}.@{menu-light} {
      color: none;
      background-color: none;

      &::after {
          width: 0;
      }
    }
  }
}

.@{dropDown} {
  &-containter {
    .@{menu},
    .@{menu}-popup {
      box-shadow: unset;
      .abcdefg();
    }
  }
}

.@{dropDown}-menu.@{menu}.@{menu}-popup {
  .abcdefg();
  .@{menu-vertical} {
    box-shadow: 2px 0 4px 0 @menu-boxshadow;
  }
}
